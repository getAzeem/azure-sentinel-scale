{"format_version":"1.2","terraform_version":"1.13.1","variables":{"admin_password":{"value":"123"},"admin_username":{"value":"azureuser"},"application_port":{"value":80},"instance_count":{"value":2},"location":{"value":"East US"},"prefix":{"value":"vmss"},"vm_sku":{"value":"Standard_B1s"}},"planned_values":{"outputs":{"loadbalancer_dns_name":{"sensitive":false,"type":"string","value":"vmss-dns"},"loadbalancer_public_ip":{"sensitive":false},"vmss_id":{"sensitive":false}},"root_module":{"resources":[{"address":"azurerm_lb.main","mode":"managed","type":"azurerm_lb","name":"main","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"edge_zone":null,"frontend_ip_configuration":[{"name":"PublicIPAddress","zones":null}],"location":"eastus","name":"vmss-lb","resource_group_name":"vmss-resources","sku":"Standard","sku_tier":"Regional","tags":null,"timeouts":null},"sensitive_values":{"frontend_ip_configuration":[{"inbound_nat_rules":[],"load_balancer_rules":[],"outbound_rules":[]}],"private_ip_addresses":[]}},{"address":"azurerm_lb_backend_address_pool.main","mode":"managed","type":"azurerm_lb_backend_address_pool","name":"main","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"name":"BackEndAddressPool","synchronous_mode":null,"timeouts":null,"tunnel_interface":[],"virtual_network_id":null},"sensitive_values":{"backend_ip_configurations":[],"inbound_nat_rules":[],"load_balancing_rules":[],"outbound_rules":[],"tunnel_interface":[]}},{"address":"azurerm_lb_probe.main","mode":"managed","type":"azurerm_lb_probe","name":"main","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"interval_in_seconds":15,"name":"http-running-probe","number_of_probes":2,"port":80,"probe_threshold":1,"protocol":"Tcp","request_path":null,"timeouts":null},"sensitive_values":{"load_balancer_rules":[]}},{"address":"azurerm_lb_rule.main","mode":"managed","type":"azurerm_lb_rule","name":"main","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"backend_port":80,"disable_outbound_snat":false,"enable_floating_ip":false,"enable_tcp_reset":null,"frontend_ip_configuration_name":"PublicIPAddress","frontend_port":80,"name":"LBRule","protocol":"Tcp","timeouts":null},"sensitive_values":{"backend_address_pool_ids":[]}},{"address":"azurerm_linux_virtual_machine_scale_set.main","mode":"managed","type":"azurerm_linux_virtual_machine_scale_set","name":"main","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"additional_capabilities":[],"admin_password":"123","admin_ssh_key":[],"admin_username":"azureuser","automatic_os_upgrade_policy":[],"boot_diagnostics":[],"capacity_reservation_group_id":null,"custom_data":"IyEvYmluL2Jhc2gKCiMgVXBkYXRlIHBhY2thZ2UgbGlzdCBhbmQgaW5zdGFsbCBOR0lOWAphcHQtZ2V0IHVwZGF0ZQphcHQtZ2V0IGluc3RhbGwgLXkgbmdpbngKCiMgQ3JlYXRlIGEgc2ltcGxlIEhUTUwgcGFnZQpjYXQgPiAvdmFyL3d3dy9odG1sL2luZGV4Lmh0bWwgPDwgRU9GCjxodG1sPgo8aGVhZD4KICAgIDx0aXRsZT5BenVyZSBWTVNTIERlbW88L3RpdGxlPgo8L2hlYWQ+Cjxib2R5PgogICAgPGgxPkhlbGxvIGZyb20gQXp1cmUgVk1TUyE8L2gxPgogICAgPHA+SG9zdG5hbWU6ICQoaG9zdG5hbWUpPC9wPgo8L2JvZHk+CjwvaHRtbD4KRU9GCgojIEVuc3VyZSBOR0lOWCBzdGFydHMgb24gYm9vdCBhbmQgc3RhcnQgaXQgbm93CnN5c3RlbWN0bCBlbmFibGUgbmdpbngKc3lzdGVtY3RsIHN0YXJ0IG5naW54Cg==","data_disk":[],"disable_password_authentication":false,"do_not_run_extensions_on_overprovisioned_machines":false,"edge_zone":null,"encryption_at_host_enabled":null,"eviction_policy":null,"extensions_time_budget":"PT1H30M","health_probe_id":null,"host_group_id":null,"identity":[],"instances":2,"location":"eastus","max_bid_price":-1,"name":"vmss-vmss","network_interface":[{"dns_servers":null,"enable_accelerated_networking":false,"enable_ip_forwarding":false,"ip_configuration":[{"application_gateway_backend_address_pool_ids":null,"application_security_group_ids":null,"load_balancer_inbound_nat_rules_ids":null,"name":"internal","primary":true,"public_ip_address":[],"version":"IPv4"}],"name":"main","network_security_group_id":null,"primary":true}],"os_disk":[{"caching":"ReadWrite","diff_disk_settings":[],"disk_encryption_set_id":null,"secure_vm_disk_encryption_set_id":null,"security_encryption_type":null,"storage_account_type":"Standard_LRS","write_accelerator_enabled":false}],"overprovision":true,"plan":[],"priority":"Regular","provision_vm_agent":true,"proximity_placement_group_id":null,"resource_group_name":"vmss-resources","rolling_upgrade_policy":[],"secret":[],"secure_boot_enabled":null,"single_placement_group":true,"sku":"Standard_B1s","source_image_id":null,"source_image_reference":[{"offer":"0001-com-ubuntu-server-jammy","publisher":"Canonical","sku":"22_04-lts-gen2","version":"latest"}],"tags":null,"timeouts":null,"upgrade_mode":"Manual","user_data":null,"vtpm_enabled":null,"zone_balance":false,"zones":null},"sensitive_values":{"additional_capabilities":[],"admin_password":true,"admin_ssh_key":[],"automatic_instance_repair":[],"automatic_os_upgrade_policy":[],"boot_diagnostics":[],"custom_data":true,"data_disk":[],"extension":[],"gallery_application":[],"gallery_applications":[],"identity":[],"network_interface":[{"ip_configuration":[{"load_balancer_backend_address_pool_ids":[],"public_ip_address":[]}]}],"os_disk":[{"diff_disk_settings":[]}],"plan":[],"rolling_upgrade_policy":[],"scale_in":[],"secret":[],"source_image_reference":[{}],"spot_restore":[],"terminate_notification":[],"termination_notification":[]}},{"address":"azurerm_monitor_autoscale_setting.main","mode":"managed","type":"azurerm_monitor_autoscale_setting","name":"main","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":2,"values":{"enabled":true,"location":"eastus","name":"vmss-autoscale","notification":[],"predictive":[],"profile":[{"capacity":[{"default":2,"maximum":5,"minimum":2}],"fixed_date":[],"name":"default","recurrence":[],"rule":[{"metric_trigger":[{"dimensions":[],"divide_by_instance_count":null,"metric_name":"Percentage CPU","metric_namespace":null,"operator":"GreaterThan","statistic":"Average","threshold":75,"time_aggregation":"Average","time_grain":"PT1M","time_window":"PT5M"}],"scale_action":[{"cooldown":"PT1M","direction":"Increase","type":"ChangeCount","value":1}]},{"metric_trigger":[{"dimensions":[],"divide_by_instance_count":null,"metric_name":"Percentage CPU","metric_namespace":null,"operator":"LessThan","statistic":"Average","threshold":25,"time_aggregation":"Average","time_grain":"PT1M","time_window":"PT5M"}],"scale_action":[{"cooldown":"PT1M","direction":"Decrease","type":"ChangeCount","value":1}]}]}],"resource_group_name":"vmss-resources","tags":null,"timeouts":null},"sensitive_values":{"notification":[],"predictive":[],"profile":[{"capacity":[{}],"fixed_date":[],"recurrence":[],"rule":[{"metric_trigger":[{"dimensions":[]}],"scale_action":[{}]},{"metric_trigger":[{"dimensions":[]}],"scale_action":[{}]}]}]}},{"address":"azurerm_network_security_group.main","mode":"managed","type":"azurerm_network_security_group","name":"main","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"location":"eastus","name":"vmss-nsg","resource_group_name":"vmss-resources","security_rule":[{"access":"Allow","description":"","destination_address_prefix":"*","destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_range":"22","destination_port_ranges":[],"direction":"Inbound","name":"AllowSSH","priority":110,"protocol":"Tcp","source_address_prefix":"*","source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_range":"*","source_port_ranges":[]},{"access":"Allow","description":"","destination_address_prefix":"*","destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_range":"80","destination_port_ranges":[],"direction":"Inbound","name":"AllowHTTP","priority":100,"protocol":"Tcp","source_address_prefix":"*","source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_range":"*","source_port_ranges":[]}],"tags":null,"timeouts":null},"sensitive_values":{"security_rule":[{"destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_ranges":[],"source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_ranges":[]},{"destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_ranges":[],"source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_ranges":[]}]}},{"address":"azurerm_public_ip.main","mode":"managed","type":"azurerm_public_ip","name":"main","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"allocation_method":"Static","ddos_protection_mode":"VirtualNetworkInherited","ddos_protection_plan_id":null,"domain_name_label":"vmss-dns","edge_zone":null,"idle_timeout_in_minutes":4,"ip_tags":null,"ip_version":"IPv4","location":"eastus","name":"vmss-public-ip","public_ip_prefix_id":null,"resource_group_name":"vmss-resources","reverse_fqdn":null,"sku":"Standard","sku_tier":"Regional","tags":null,"timeouts":null,"zones":null},"sensitive_values":{}},{"address":"azurerm_resource_group.main","mode":"managed","type":"azurerm_resource_group","name":"main","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"location":"eastus","managed_by":null,"name":"vmss-resources","tags":null,"timeouts":null},"sensitive_values":{}},{"address":"azurerm_subnet.internal","mode":"managed","type":"azurerm_subnet","name":"internal","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"address_prefixes":["10.0.2.0/24"],"default_outbound_access_enabled":true,"delegation":[],"name":"internal","resource_group_name":"vmss-resources","service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null,"virtual_network_name":"vmss-network"},"sensitive_values":{"address_prefixes":[false],"delegation":[]}},{"address":"azurerm_virtual_network.main","mode":"managed","type":"azurerm_virtual_network","name":"main","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"address_space":["10.0.0.0/16"],"bgp_community":null,"ddos_protection_plan":[],"edge_zone":null,"encryption":[],"flow_timeout_in_minutes":null,"location":"eastus","name":"vmss-network","resource_group_name":"vmss-resources","tags":null,"timeouts":null},"sensitive_values":{"address_space":[false],"ddos_protection_plan":[],"dns_servers":[],"encryption":[],"subnet":[]}}]}},"resource_changes":[{"address":"azurerm_lb.main","mode":"managed","type":"azurerm_lb","name":"main","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"edge_zone":null,"frontend_ip_configuration":[{"name":"PublicIPAddress","zones":null}],"location":"eastus","name":"vmss-lb","resource_group_name":"vmss-resources","sku":"Standard","sku_tier":"Regional","tags":null,"timeouts":null},"after_unknown":{"frontend_ip_configuration":[{"gateway_load_balancer_frontend_ip_configuration_id":true,"id":true,"inbound_nat_rules":true,"load_balancer_rules":true,"outbound_rules":true,"private_ip_address":true,"private_ip_address_allocation":true,"private_ip_address_version":true,"public_ip_address_id":true,"public_ip_prefix_id":true,"subnet_id":true}],"id":true,"private_ip_address":true,"private_ip_addresses":true},"before_sensitive":false,"after_sensitive":{"frontend_ip_configuration":[{"inbound_nat_rules":[],"load_balancer_rules":[],"outbound_rules":[]}],"private_ip_addresses":[]}}},{"address":"azurerm_lb_backend_address_pool.main","mode":"managed","type":"azurerm_lb_backend_address_pool","name":"main","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"name":"BackEndAddressPool","synchronous_mode":null,"timeouts":null,"tunnel_interface":[],"virtual_network_id":null},"after_unknown":{"backend_ip_configurations":true,"id":true,"inbound_nat_rules":true,"load_balancing_rules":true,"loadbalancer_id":true,"outbound_rules":true,"tunnel_interface":[]},"before_sensitive":false,"after_sensitive":{"backend_ip_configurations":[],"inbound_nat_rules":[],"load_balancing_rules":[],"outbound_rules":[],"tunnel_interface":[]}}},{"address":"azurerm_lb_probe.main","mode":"managed","type":"azurerm_lb_probe","name":"main","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"interval_in_seconds":15,"name":"http-running-probe","number_of_probes":2,"port":80,"probe_threshold":1,"protocol":"Tcp","request_path":null,"timeouts":null},"after_unknown":{"id":true,"load_balancer_rules":true,"loadbalancer_id":true},"before_sensitive":false,"after_sensitive":{"load_balancer_rules":[]}}},{"address":"azurerm_lb_rule.main","mode":"managed","type":"azurerm_lb_rule","name":"main","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"backend_port":80,"disable_outbound_snat":false,"enable_floating_ip":false,"enable_tcp_reset":null,"frontend_ip_configuration_name":"PublicIPAddress","frontend_port":80,"name":"LBRule","protocol":"Tcp","timeouts":null},"after_unknown":{"backend_address_pool_ids":true,"frontend_ip_configuration_id":true,"id":true,"idle_timeout_in_minutes":true,"load_distribution":true,"loadbalancer_id":true,"probe_id":true},"before_sensitive":false,"after_sensitive":{"backend_address_pool_ids":[]}}},{"address":"azurerm_linux_virtual_machine_scale_set.main","mode":"managed","type":"azurerm_linux_virtual_machine_scale_set","name":"main","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"additional_capabilities":[],"admin_password":"123","admin_ssh_key":[],"admin_username":"azureuser","automatic_os_upgrade_policy":[],"boot_diagnostics":[],"capacity_reservation_group_id":null,"custom_data":"IyEvYmluL2Jhc2gKCiMgVXBkYXRlIHBhY2thZ2UgbGlzdCBhbmQgaW5zdGFsbCBOR0lOWAphcHQtZ2V0IHVwZGF0ZQphcHQtZ2V0IGluc3RhbGwgLXkgbmdpbngKCiMgQ3JlYXRlIGEgc2ltcGxlIEhUTUwgcGFnZQpjYXQgPiAvdmFyL3d3dy9odG1sL2luZGV4Lmh0bWwgPDwgRU9GCjxodG1sPgo8aGVhZD4KICAgIDx0aXRsZT5BenVyZSBWTVNTIERlbW88L3RpdGxlPgo8L2hlYWQ+Cjxib2R5PgogICAgPGgxPkhlbGxvIGZyb20gQXp1cmUgVk1TUyE8L2gxPgogICAgPHA+SG9zdG5hbWU6ICQoaG9zdG5hbWUpPC9wPgo8L2JvZHk+CjwvaHRtbD4KRU9GCgojIEVuc3VyZSBOR0lOWCBzdGFydHMgb24gYm9vdCBhbmQgc3RhcnQgaXQgbm93CnN5c3RlbWN0bCBlbmFibGUgbmdpbngKc3lzdGVtY3RsIHN0YXJ0IG5naW54Cg==","data_disk":[],"disable_password_authentication":false,"do_not_run_extensions_on_overprovisioned_machines":false,"edge_zone":null,"encryption_at_host_enabled":null,"eviction_policy":null,"extensions_time_budget":"PT1H30M","health_probe_id":null,"host_group_id":null,"identity":[],"instances":2,"location":"eastus","max_bid_price":-1,"name":"vmss-vmss","network_interface":[{"dns_servers":null,"enable_accelerated_networking":false,"enable_ip_forwarding":false,"ip_configuration":[{"application_gateway_backend_address_pool_ids":null,"application_security_group_ids":null,"load_balancer_inbound_nat_rules_ids":null,"name":"internal","primary":true,"public_ip_address":[],"version":"IPv4"}],"name":"main","network_security_group_id":null,"primary":true}],"os_disk":[{"caching":"ReadWrite","diff_disk_settings":[],"disk_encryption_set_id":null,"secure_vm_disk_encryption_set_id":null,"security_encryption_type":null,"storage_account_type":"Standard_LRS","write_accelerator_enabled":false}],"overprovision":true,"plan":[],"priority":"Regular","provision_vm_agent":true,"proximity_placement_group_id":null,"resource_group_name":"vmss-resources","rolling_upgrade_policy":[],"secret":[],"secure_boot_enabled":null,"single_placement_group":true,"sku":"Standard_B1s","source_image_id":null,"source_image_reference":[{"offer":"0001-com-ubuntu-server-jammy","publisher":"Canonical","sku":"22_04-lts-gen2","version":"latest"}],"tags":null,"timeouts":null,"upgrade_mode":"Manual","user_data":null,"vtpm_enabled":null,"zone_balance":false,"zones":null},"after_unknown":{"additional_capabilities":[],"admin_ssh_key":[],"automatic_instance_repair":true,"automatic_os_upgrade_policy":[],"boot_diagnostics":[],"computer_name_prefix":true,"data_disk":[],"extension":true,"extension_operations_enabled":true,"gallery_application":true,"gallery_applications":true,"id":true,"identity":[],"network_interface":[{"ip_configuration":[{"load_balancer_backend_address_pool_ids":true,"public_ip_address":[],"subnet_id":true}]}],"os_disk":[{"diff_disk_settings":[],"disk_size_gb":true}],"plan":[],"platform_fault_domain_count":true,"rolling_upgrade_policy":[],"scale_in":true,"scale_in_policy":true,"secret":[],"source_image_reference":[{}],"spot_restore":true,"terminate_notification":true,"termination_notification":true,"unique_id":true},"before_sensitive":false,"after_sensitive":{"additional_capabilities":[],"admin_password":true,"admin_ssh_key":[],"automatic_instance_repair":[],"automatic_os_upgrade_policy":[],"boot_diagnostics":[],"custom_data":true,"data_disk":[],"extension":[],"gallery_application":[],"gallery_applications":[],"identity":[],"network_interface":[{"ip_configuration":[{"load_balancer_backend_address_pool_ids":[],"public_ip_address":[]}]}],"os_disk":[{"diff_disk_settings":[]}],"plan":[],"rolling_upgrade_policy":[],"scale_in":[],"secret":[],"source_image_reference":[{}],"spot_restore":[],"terminate_notification":[],"termination_notification":[]}}},{"address":"azurerm_monitor_autoscale_setting.main","mode":"managed","type":"azurerm_monitor_autoscale_setting","name":"main","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"enabled":true,"location":"eastus","name":"vmss-autoscale","notification":[],"predictive":[],"profile":[{"capacity":[{"default":2,"maximum":5,"minimum":2}],"fixed_date":[],"name":"default","recurrence":[],"rule":[{"metric_trigger":[{"dimensions":[],"divide_by_instance_count":null,"metric_name":"Percentage CPU","metric_namespace":null,"operator":"GreaterThan","statistic":"Average","threshold":75,"time_aggregation":"Average","time_grain":"PT1M","time_window":"PT5M"}],"scale_action":[{"cooldown":"PT1M","direction":"Increase","type":"ChangeCount","value":1}]},{"metric_trigger":[{"dimensions":[],"divide_by_instance_count":null,"metric_name":"Percentage CPU","metric_namespace":null,"operator":"LessThan","statistic":"Average","threshold":25,"time_aggregation":"Average","time_grain":"PT1M","time_window":"PT5M"}],"scale_action":[{"cooldown":"PT1M","direction":"Decrease","type":"ChangeCount","value":1}]}]}],"resource_group_name":"vmss-resources","tags":null,"timeouts":null},"after_unknown":{"id":true,"notification":[],"predictive":[],"profile":[{"capacity":[{}],"fixed_date":[],"recurrence":[],"rule":[{"metric_trigger":[{"dimensions":[],"metric_resource_id":true}],"scale_action":[{}]},{"metric_trigger":[{"dimensions":[],"metric_resource_id":true}],"scale_action":[{}]}]}],"target_resource_id":true},"before_sensitive":false,"after_sensitive":{"notification":[],"predictive":[],"profile":[{"capacity":[{}],"fixed_date":[],"recurrence":[],"rule":[{"metric_trigger":[{"dimensions":[]}],"scale_action":[{}]},{"metric_trigger":[{"dimensions":[]}],"scale_action":[{}]}]}]}}},{"address":"azurerm_network_security_group.main","mode":"managed","type":"azurerm_network_security_group","name":"main","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"location":"eastus","name":"vmss-nsg","resource_group_name":"vmss-resources","security_rule":[{"access":"Allow","description":"","destination_address_prefix":"*","destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_range":"22","destination_port_ranges":[],"direction":"Inbound","name":"AllowSSH","priority":110,"protocol":"Tcp","source_address_prefix":"*","source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_range":"*","source_port_ranges":[]},{"access":"Allow","description":"","destination_address_prefix":"*","destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_range":"80","destination_port_ranges":[],"direction":"Inbound","name":"AllowHTTP","priority":100,"protocol":"Tcp","source_address_prefix":"*","source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_range":"*","source_port_ranges":[]}],"tags":null,"timeouts":null},"after_unknown":{"id":true,"security_rule":[{"destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_ranges":[],"source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_ranges":[]},{"destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_ranges":[],"source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_ranges":[]}]},"before_sensitive":false,"after_sensitive":{"security_rule":[{"destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_ranges":[],"source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_ranges":[]},{"destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_ranges":[],"source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_ranges":[]}]}}},{"address":"azurerm_public_ip.main","mode":"managed","type":"azurerm_public_ip","name":"main","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"allocation_method":"Static","ddos_protection_mode":"VirtualNetworkInherited","ddos_protection_plan_id":null,"domain_name_label":"vmss-dns","edge_zone":null,"idle_timeout_in_minutes":4,"ip_tags":null,"ip_version":"IPv4","location":"eastus","name":"vmss-public-ip","public_ip_prefix_id":null,"resource_group_name":"vmss-resources","reverse_fqdn":null,"sku":"Standard","sku_tier":"Regional","tags":null,"timeouts":null,"zones":null},"after_unknown":{"fqdn":true,"id":true,"ip_address":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"azurerm_resource_group.main","mode":"managed","type":"azurerm_resource_group","name":"main","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"location":"eastus","managed_by":null,"name":"vmss-resources","tags":null,"timeouts":null},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"azurerm_subnet.internal","mode":"managed","type":"azurerm_subnet","name":"internal","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"address_prefixes":["10.0.2.0/24"],"default_outbound_access_enabled":true,"delegation":[],"name":"internal","resource_group_name":"vmss-resources","service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null,"virtual_network_name":"vmss-network"},"after_unknown":{"address_prefixes":[false],"delegation":[],"enforce_private_link_endpoint_network_policies":true,"enforce_private_link_service_network_policies":true,"id":true,"private_endpoint_network_policies":true,"private_endpoint_network_policies_enabled":true,"private_link_service_network_policies_enabled":true},"before_sensitive":false,"after_sensitive":{"address_prefixes":[false],"delegation":[]}}},{"address":"azurerm_virtual_network.main","mode":"managed","type":"azurerm_virtual_network","name":"main","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"address_space":["10.0.0.0/16"],"bgp_community":null,"ddos_protection_plan":[],"edge_zone":null,"encryption":[],"flow_timeout_in_minutes":null,"location":"eastus","name":"vmss-network","resource_group_name":"vmss-resources","tags":null,"timeouts":null},"after_unknown":{"address_space":[false],"ddos_protection_plan":[],"dns_servers":true,"encryption":[],"guid":true,"id":true,"subnet":true},"before_sensitive":false,"after_sensitive":{"address_space":[false],"ddos_protection_plan":[],"dns_servers":[],"encryption":[],"subnet":[]}}}],"output_changes":{"loadbalancer_dns_name":{"actions":["create"],"before":null,"after":"vmss-dns","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"loadbalancer_public_ip":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"vmss_id":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false}},"prior_state":{"format_version":"1.0","terraform_version":"1.13.1","values":{"outputs":{"loadbalancer_dns_name":{"sensitive":false,"value":"vmss-dns","type":"string"}},"root_module":{}}},"configuration":{"provider_config":{"azurerm":{"name":"azurerm","full_name":"registry.terraform.io/hashicorp/azurerm","version_constraint":"~\u003e 3.0","expressions":{"features":[{}]}},"random":{"name":"random","full_name":"registry.terraform.io/hashicorp/random","version_constraint":"~\u003e 3.0"}},"root_module":{"outputs":{"loadbalancer_dns_name":{"expression":{"references":["azurerm_public_ip.main.domain_name_label","azurerm_public_ip.main"]}},"loadbalancer_public_ip":{"expression":{"references":["azurerm_public_ip.main.ip_address","azurerm_public_ip.main"]}},"vmss_id":{"expression":{"references":["azurerm_linux_virtual_machine_scale_set.main.id","azurerm_linux_virtual_machine_scale_set.main"]}}},"resources":[{"address":"azurerm_lb.main","mode":"managed","type":"azurerm_lb","name":"main","provider_config_key":"azurerm","expressions":{"frontend_ip_configuration":[{"name":{"constant_value":"PublicIPAddress"},"public_ip_address_id":{"references":["azurerm_public_ip.main.id","azurerm_public_ip.main"]}}],"location":{"references":["azurerm_resource_group.main.location","azurerm_resource_group.main"]},"name":{"references":["var.prefix"]},"resource_group_name":{"references":["azurerm_resource_group.main.name","azurerm_resource_group.main"]},"sku":{"constant_value":"Standard"}},"schema_version":0},{"address":"azurerm_lb_backend_address_pool.main","mode":"managed","type":"azurerm_lb_backend_address_pool","name":"main","provider_config_key":"azurerm","expressions":{"loadbalancer_id":{"references":["azurerm_lb.main.id","azurerm_lb.main"]},"name":{"constant_value":"BackEndAddressPool"}},"schema_version":0},{"address":"azurerm_lb_probe.main","mode":"managed","type":"azurerm_lb_probe","name":"main","provider_config_key":"azurerm","expressions":{"loadbalancer_id":{"references":["azurerm_lb.main.id","azurerm_lb.main"]},"name":{"constant_value":"http-running-probe"},"port":{"references":["var.application_port"]},"protocol":{"constant_value":"Tcp"}},"schema_version":0},{"address":"azurerm_lb_rule.main","mode":"managed","type":"azurerm_lb_rule","name":"main","provider_config_key":"azurerm","expressions":{"backend_address_pool_ids":{"references":["azurerm_lb_backend_address_pool.main.id","azurerm_lb_backend_address_pool.main"]},"backend_port":{"references":["var.application_port"]},"frontend_ip_configuration_name":{"constant_value":"PublicIPAddress"},"frontend_port":{"references":["var.application_port"]},"loadbalancer_id":{"references":["azurerm_lb.main.id","azurerm_lb.main"]},"name":{"constant_value":"LBRule"},"probe_id":{"references":["azurerm_lb_probe.main.id","azurerm_lb_probe.main"]},"protocol":{"constant_value":"Tcp"}},"schema_version":0},{"address":"azurerm_linux_virtual_machine_scale_set.main","mode":"managed","type":"azurerm_linux_virtual_machine_scale_set","name":"main","provider_config_key":"azurerm","expressions":{"admin_password":{"references":["var.admin_password"]},"admin_username":{"references":["var.admin_username"]},"custom_data":{"references":["path.module"]},"disable_password_authentication":{"constant_value":false},"instances":{"references":["var.instance_count"]},"location":{"references":["azurerm_resource_group.main.location","azurerm_resource_group.main"]},"name":{"references":["var.prefix"]},"network_interface":[{"ip_configuration":[{"load_balancer_backend_address_pool_ids":{"references":["azurerm_lb_backend_address_pool.main.id","azurerm_lb_backend_address_pool.main"]},"name":{"constant_value":"internal"},"primary":{"constant_value":true},"subnet_id":{"references":["azurerm_subnet.internal.id","azurerm_subnet.internal"]}}],"name":{"constant_value":"main"},"primary":{"constant_value":true}}],"os_disk":[{"caching":{"constant_value":"ReadWrite"},"storage_account_type":{"constant_value":"Standard_LRS"}}],"resource_group_name":{"references":["azurerm_resource_group.main.name","azurerm_resource_group.main"]},"sku":{"references":["var.vm_sku"]},"source_image_reference":[{"offer":{"constant_value":"0001-com-ubuntu-server-jammy"},"publisher":{"constant_value":"Canonical"},"sku":{"constant_value":"22_04-lts-gen2"},"version":{"constant_value":"latest"}}]},"schema_version":0,"depends_on":["azurerm_lb_rule.main"]},{"address":"azurerm_monitor_autoscale_setting.main","mode":"managed","type":"azurerm_monitor_autoscale_setting","name":"main","provider_config_key":"azurerm","expressions":{"location":{"references":["azurerm_resource_group.main.location","azurerm_resource_group.main"]},"name":{"references":["var.prefix"]},"profile":[{"capacity":[{"default":{"references":["var.instance_count"]},"maximum":{"constant_value":5},"minimum":{"constant_value":2}}],"name":{"constant_value":"default"},"rule":[{"metric_trigger":[{"metric_name":{"constant_value":"Percentage CPU"},"metric_resource_id":{"references":["azurerm_linux_virtual_machine_scale_set.main.id","azurerm_linux_virtual_machine_scale_set.main"]},"operator":{"constant_value":"GreaterThan"},"statistic":{"constant_value":"Average"},"threshold":{"constant_value":75},"time_aggregation":{"constant_value":"Average"},"time_grain":{"constant_value":"PT1M"},"time_window":{"constant_value":"PT5M"}}],"scale_action":[{"cooldown":{"constant_value":"PT1M"},"direction":{"constant_value":"Increase"},"type":{"constant_value":"ChangeCount"},"value":{"constant_value":"1"}}]},{"metric_trigger":[{"metric_name":{"constant_value":"Percentage CPU"},"metric_resource_id":{"references":["azurerm_linux_virtual_machine_scale_set.main.id","azurerm_linux_virtual_machine_scale_set.main"]},"operator":{"constant_value":"LessThan"},"statistic":{"constant_value":"Average"},"threshold":{"constant_value":25},"time_aggregation":{"constant_value":"Average"},"time_grain":{"constant_value":"PT1M"},"time_window":{"constant_value":"PT5M"}}],"scale_action":[{"cooldown":{"constant_value":"PT1M"},"direction":{"constant_value":"Decrease"},"type":{"constant_value":"ChangeCount"},"value":{"constant_value":"1"}}]}]}],"resource_group_name":{"references":["azurerm_resource_group.main.name","azurerm_resource_group.main"]},"target_resource_id":{"references":["azurerm_linux_virtual_machine_scale_set.main.id","azurerm_linux_virtual_machine_scale_set.main"]}},"schema_version":2},{"address":"azurerm_network_security_group.main","mode":"managed","type":"azurerm_network_security_group","name":"main","provider_config_key":"azurerm","expressions":{"location":{"references":["azurerm_resource_group.main.location","azurerm_resource_group.main"]},"name":{"references":["var.prefix"]},"resource_group_name":{"references":["azurerm_resource_group.main.name","azurerm_resource_group.main"]},"security_rule":{"references":["var.application_port"]}},"schema_version":0},{"address":"azurerm_public_ip.main","mode":"managed","type":"azurerm_public_ip","name":"main","provider_config_key":"azurerm","expressions":{"allocation_method":{"constant_value":"Static"},"domain_name_label":{"references":["var.prefix"]},"location":{"references":["azurerm_resource_group.main.location","azurerm_resource_group.main"]},"name":{"references":["var.prefix"]},"resource_group_name":{"references":["azurerm_resource_group.main.name","azurerm_resource_group.main"]},"sku":{"constant_value":"Standard"}},"schema_version":0},{"address":"azurerm_resource_group.main","mode":"managed","type":"azurerm_resource_group","name":"main","provider_config_key":"azurerm","expressions":{"location":{"references":["var.location"]},"name":{"references":["var.prefix"]}},"schema_version":0},{"address":"azurerm_subnet.internal","mode":"managed","type":"azurerm_subnet","name":"internal","provider_config_key":"azurerm","expressions":{"address_prefixes":{"constant_value":["10.0.2.0/24"]},"name":{"constant_value":"internal"},"resource_group_name":{"references":["azurerm_resource_group.main.name","azurerm_resource_group.main"]},"virtual_network_name":{"references":["azurerm_virtual_network.main.name","azurerm_virtual_network.main"]}},"schema_version":0},{"address":"azurerm_virtual_network.main","mode":"managed","type":"azurerm_virtual_network","name":"main","provider_config_key":"azurerm","expressions":{"address_space":{"constant_value":["10.0.0.0/16"]},"location":{"references":["azurerm_resource_group.main.location","azurerm_resource_group.main"]},"name":{"references":["var.prefix"]},"resource_group_name":{"references":["azurerm_resource_group.main.name","azurerm_resource_group.main"]}},"schema_version":0}],"variables":{"admin_password":{"description":"Admin password for the VMs","sensitive":true},"admin_username":{"default":"azureuser","description":"Admin username for the VMs"},"application_port":{"default":80,"description":"The port that the web application listens on"},"instance_count":{"default":2,"description":"The number of VM instances"},"location":{"default":"East US","description":"The Azure Region in which all resources should be created"},"prefix":{"default":"vmss","description":"The prefix which should be used for all resources"},"vm_sku":{"default":"Standard_B1s","description":"The VM Size for the Scale Set instances"}}}},"relevant_attributes":[{"resource":"azurerm_public_ip.main","attribute":["domain_name_label"]},{"resource":"azurerm_public_ip.main","attribute":["ip_address"]},{"resource":"azurerm_lb.main","attribute":["id"]},{"resource":"azurerm_public_ip.main","attribute":["id"]},{"resource":"azurerm_lb_probe.main","attribute":["id"]},{"resource":"azurerm_resource_group.main","attribute":["location"]},{"resource":"azurerm_subnet.internal","attribute":["id"]},{"resource":"azurerm_resource_group.main","attribute":["name"]},{"resource":"azurerm_lb_backend_address_pool.main","attribute":["id"]},{"resource":"azurerm_virtual_network.main","attribute":["name"]},{"resource":"azurerm_linux_virtual_machine_scale_set.main","attribute":["id"]}],"timestamp":"2025-09-08T04:10:02Z","applyable":true,"complete":true,"errored":false}
